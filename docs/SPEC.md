# Iconecream 設計仕様書

## 目的

プロフィール画像用のアイスクリームアイコン画像を生成できるWebアプリケーション。

## 方針

simple is best

---

## 機能仕様

### 初期表示

- プリセットカラーセット（5セット：アイス本体色＋背景色の組み合わせ）の中からランダムに1セットを選び、アイスクリームを表示する
- プリセットカラーはハードコーディングする
- プリセットカラーは画面上に表示しない（内部的にランダム選択のみ）

### 色変更機能

- アイス本体の色をカラーピッカーで自由に変更できる
- 背景色をカラーピッカーで自由に変更できる
- アイス色・背景色それぞれ別々のカラーピッカーを用意する
- コーン・影などの装飾要素の色は固定（変更不可）
- スクープの形状・段数は固定（色のみ変更）
- プレビューはリアルタイムで反映する

### ダウンロード機能

- JPG形式でダウンロードできる
- 透過なし（不透過画像のみ生成）
- JPG品質（圧縮率）は固定値
- デフォルト画像サイズ: 400 x 400 px
- ダウンロードファイル名: `iconecream.jpg`（複数ダウンロード時はブラウザの自動採番に任せる）

### 詳細設定機能

- ダウンロードする画像サイズを変更できる
- 画像サイズプリセットを用意する（4種）
- 初期表示では折りたたみで非表示

#### 画像サイズプリセット

| プリセット名 | サイズ         | 用途                         |
| ------------ | -------------- | ---------------------------- |
| Small        | 128 × 128 px   | 軽量・アップロード制限対策   |
| Default      | 400 × 400 px   | 汎用（X、TikTok、Bluesky等） |
| Large        | 800 × 800 px   | 高解像度（YouTube等）        |
| XLarge       | 1024 × 1024 px | 高画質保存用                 |

- デフォルト選択は「Default（400 × 400 px）」
- 各サービスへの細かいサイズ調整はサービス側の自動リサイズに任せる

### 利用規約

- アイコン画像としての利用: 可
- 画像素材としての販売: 不可
- サイト上にインラインでコンパクトに表示する

### エラーハンドリング

- 全てのエラーケースについて「エラーが発生しました」とだけ表示する

---

## 画面レイアウト

### 構成（1ページ完結）

上から順に:

1. プレビュー表示
2. カラーピッカー（アイス色・背景色）
3. ダウンロードボタン
4. 詳細設定（折りたたみ）
5. 利用規約
6. フッター

### レスポンシブ対応

- モバイル対応: 必要
- プレビュー表示サイズ: 画面サイズに対して固定（ダウンロードサイズとは独立）

### カラーテーマ（ストロベリーミント）

| 用途         | カラーコード | 説明               |
| ------------ | ------------ | ------------------ |
| 背景         | `#FFF5F5`    | ほんのりピンク     |
| メインカラー | `#F8A4B8`    | ストロベリーピンク |
| アクセント   | `#A8D8CB`    | ミントグリーン     |
| テキスト     | `#5C4B51`    | ダークブラウン     |

### その他UI方針

- ダークモード対応: 不要（カラー固定）
- 多言語対応: 不要（日本語のみ）

---

## SVG仕様

### 作成方針

- 著作権をシンプルにするためSVGは自作する
- Adobe Illustratorで作成する

### レイヤー構造

- 色変更可能な部分（アイス本体）を独立したレイヤーに分離する
- レイヤー名から色変更対象を識別できるようにする
- 色変更対象は「アイス本体」と「背景色」の2か所のみ
- Illustrator側でオブジェクトをまとめ、SVG出力時の構造がシンプルになるよう工夫する
- レイヤー分離がSVGに正しく反映されることを確認済み

---

## 技術仕様

### 技術スタック

- ランタイム: Bun
- ビルドツール: Vite
- フレームワーク: React
- 言語: TypeScript
- ホスティング: GitHub Pages（GitHub Actionsで自動ビルド・デプロイ）
- 静的サイト

### SVG → JPG変換

自前Canvas描画方式を採用する。処理フローは以下の通り:

1. インラインSVGの指定要素の色を置換する
2. SVG文字列をbase64エンコードする
3. Imageオブジェクトにロードする
4. 指定サイズのCanvasに描画する
5. `canvas.toDataURL('image/jpeg')` でJPGデータを取得する
6. ダウンロードリンクを生成する

依存ライブラリなし（バンドルサイズ最小）。シンプルなSVG（CSSスタイルなし・外部リソースなし）のため、ブラウザ互換性の問題は生じにくい想定。Safari等で問題が出た場合は `html-to-image` ライブラリへの切り替えをフォールバックとする。ブラウザ互換性は確認済み（iOS Safari含む）。

### OGP対応

- 固定の1枚のOGP画像を用意する（動的生成なし）※Illustratorで作成済み
- title: `Iconecream`
- description: `カラーを選ぶだけ。アイスクリームのアイコン画像メーカー`

### リポジトリ

- 公開設定: public
- ライセンス: MIT（GitHub生成のものを使用）
- GitHub Pages URL: デフォルト（`username.github.io/repo`）、カスタムドメインなし

---

## プリセットカラー

初期表示でランダム選択されるアイス本体と背景色のカラーセット。
残りのパターンは実装しながら追加予定。

| #   | アイス本体 | 背景色    |
| --- | ---------- | --------- |
| 1   | `#61b0e2`  | `#ac75b0` |
| 2   | 未定       | 未定      |
| 3   | 未定       | 未定      |
| 4   | 未定       | 未定      |
| 5   | 未定       | 未定      |

---

## やらないこと

- ログイン機能
- 保存機能
- SNSシェア機能
- ダークモード
- 多言語対応
- 透過画像の生成
- グラデーション背景
- スクープ形状・段数の変更

---

## 未決定事項まとめ

| 項目                        | 状態                       | 備考                                                     |
| --------------------------- | -------------------------- | -------------------------------------------------------- |
| ~~サイト名~~                | **決定: Iconecream**       |                                                          |
| ~~ダウンロードファイル名~~  | **決定: `iconecream.jpg`** | ブラウザ自動採番に委任                                   |
| ~~画像サイズプリセット~~    | **決定: 4種**              | 128 / 400 / 800 / 1024 px                                |
| ~~プリセットカラー~~        | **1セット決定**            | 残り4セットは実装しながら検討                            |
| ~~OGPタイトル~~             | **決定: Iconecream**       |                                                          |
| ~~OGP description~~         | **決定**                   | `カラーを選ぶだけ。アイスクリームのアイコン画像メーカー` |
| ~~OGP画像~~                 | **作成済み**               | Illustratorで作成                                        |
| ~~SVGレイヤー構造の検証~~   | **確認済み**               |                                                          |
| ~~ブラウザ互換性テスト~~    | **確認済み**               | iOS Safari含む                                           |
| プリセットカラー残り4セット | 仮決定                     | コンポーネント設計に記載                                 |
